{"version":3,"sources":["lib/util/private-store.js"],"names":[],"mappings":";;AAAA,WAAW,CAAC;AACZ,YAAY,CAAC;;AAEb,SAAS,QAAQ,CAAE,GAAG,EAAE;AACtB,SAAQ,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,CAAE;CAC9B;;AAED,SAAS,SAAS,CAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE;AAC7C,MAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AACpB,WAAO,SAAS,CAAC;GACpB;;AAED,MAAI,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAChC,MAAI,CAAC,IAAI,EAAE;AACT,QAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,EAAE,CAAC;AACxC,WAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;GAC5B,MAAM,IAAI,QAAQ,CAAC,OAAO,CAAC,EAAE;AAC5B,SAAK,IAAI,GAAG,IAAI,OAAO,EAAE;AACvB,UAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;KAC1B;AACD,WAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;GAC5B;AACD,SAAO,IAAI,CAAC;CACb;;AAED,SAAS,aAAa,CAAE,IAAI,EAAE;AAC5B,MAAI,YAAY,GAAG,IAAI,OAAO,EAAE;MAC5B,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;;AAE/C,OAAK,UAAO,GAAG,UAAC,OAAO;WAAK,YAAY,UAAO,CAAC,OAAO,CAAC;GAAA,CAAC;AACzD,OAAK,CAAC,KAAK,GAAG;WAAM,YAAY,CAAC,KAAK,EAAE;GAAA,CAAC;AACzC,OAAK,CAAC,MAAM,GAAG,aAAa,CAAC;;AAE7B,SAAO,KAAK,CAAC;CACd;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,EAAE,CAAC","file":"lib/util/private-store.js","sourcesContent":["'use babel';\r\n'use strict';\r\n\r\nfunction isObject (val) {\r\n  return (val === Object(val));\r\n}\r\n\r\nfunction storeBase (storage, context, newData) {\r\n  if (!isObject(context)) {\r\n      return undefined;\r\n  }\r\n\r\n  var data = storage.get(context);\r\n  if (!data) {\r\n    data = isObject(newData) ? newData : {};\r\n    storage.set(context, data);\r\n  } else if (isObject(newData)) {\r\n    for (let key in newData) {\r\n      data[key] = newData[key];\r\n    }\r\n    storage.set(context, data);\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction createStorage (self) {\r\n  var privateStore = new WeakMap(),\r\n      store = storeBase.bind(self, privateStore);\r\n\r\n  store.delete = (context) => privateStore.delete(context);\r\n  store.clear = () => privateStore.clear();\r\n  store.create = createStorage;\r\n\r\n  return store;\r\n}\r\n\r\nmodule.exports = createStorage();\r\n\r\n/*\r\n\r\nvar _private = require('private-store')\r\n\r\n_private2 = _private.create();\r\n\r\nfunction Foo (x) {\r\n  _private(this, { privateVal: x });\r\n  _private2(this, { privateVal: 'different store' })\r\n}\r\nFoo.prototype.getVal = function () {\r\n  return _private(this).privateVal;\r\n}\r\nFoo.prototype.getVal2 = function () {\r\n  return _private2(this).privateVal;\r\n}\r\n\r\nbar = new Foo('peekaboo');\r\nbar.getVal();\r\nbar.getVal2();\r\n\r\n*/\r\n"]}