{"version":3,"sources":["lib/util/Logger.js"],"names":[],"mappings":"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","file":"lib/util/Logger.js","sourcesContent":["'use babel';\r\n'use strict';\r\n\r\n\r\nvar isBrowser = (typeof window !== 'undefined'),\r\n    fs,\r\n    _ = require('lodash'),\r\n    util = (!isBrowser) && require('util'),\r\n    _private = require('./private-store'),\r\n    slice = Array.prototype.slice;\r\n\r\nvar DEFAULT_LOG_LEVEL = 3; // logger.info\r\n\r\ntry {\r\n  // in case browser but not atom-shell\r\n  fs = require('fs');\r\n} catch (err) { }\r\n\r\n\r\nvar Logger = function (options, filename) {\r\n  var self = this,\r\n      logName = _.isObject(options) ? (options.name || options.logName) : options,\r\n      name = logName || 'log';\r\n\r\n  options = _.defaults({}, options, {\r\n    name: name,\r\n    destination: 'console', // could also be 'file'\r\n    filepath: undefined, // set to save to file\r\n    severity: Logger.LOG_LEVEL,\r\n    color: undefined,\r\n    backgroundColor: undefined\r\n  });\r\n\r\n  this.name = name;\r\n\r\n  this.filename = filename;\r\n\r\n  this.level = options.severity;\r\n\r\n  registerLogger(this);\r\n\r\n  if (isBrowser) {\r\n    this.labelCSS = 'font-family: sans-serif; font-weight: bold;';\r\n    if (options.color || options.backgroundColor) {\r\n      if (options.color) {\r\n        this.labelCSS += 'color: ' + options.color;\r\n      }\r\n      if (options.backgroundColor) {\r\n        this.labelCSS += 'background-color: ' + options.color;\r\n      }\r\n    } else {\r\n      this.labelCSS += randomHSLCSS();\r\n    }\r\n  } else {\r\n    this.labelColor = '';\r\n  }\r\n\r\n  // so you can set global verbosity level for specific names\r\n  //if (!(name in loggers) && !isNaN(level)) {\r\n  //  loggers[name] = parseInt(level, 10);\r\n  //}\r\n\r\n  this.writeBrowser = function (severity) {\r\n    var time = (new Date()).toISOString().replace(/.*T\\d\\d:(.*)Z/, '$1'),\r\n        spec = self.levelMap[severity || 'log'],\r\n        timeCSS = 'color:#999',\r\n        specCSS = spec.css,\r\n        labelCSS = self.labelCSS,\r\n        CSSspecifier = '%c',\r\n        args = [`${CSSspecifier}%s ${CSSspecifier} %s ${CSSspecifier} %s `,\r\n            timeCSS, time,\r\n            specCSS, spec.title,\r\n            labelCSS, self.name + ' '\r\n          ].concat(slice.call(arguments, 1)),\r\n        level = self.getLevel(),\r\n        consoleFn = spec.f || console.log;\r\n\r\n    if (Logger.onWrite && _.isFunction(Logger.onWrite) && level >= Logger.LOG_LEVEL) {\r\n      let message = {\r\n        severity: severity,\r\n        time: time,\r\n        domain: self.name,\r\n        data: slice.call(arguments, 1)\r\n      };\r\n      Logger.onWrite(message);\r\n    }\r\n\r\n    if (level >= spec.severity && level >= Logger.LOG_LEVEL) {\r\n      consoleFn.apply(console, args);\r\n    }\r\n\r\n\r\n  };\r\n\r\n  this.writeConsole = function (severity) {\r\n    var now = (new Date()).toISOString().replace(/.*T\\d\\d:(.*)Z/, '$1'),\r\n        spec = self.levelMap[severity || 'log'],\r\n        time = now,\r\n        title = spec.title,\r\n        label = self.name,\r\n        inspectedArgs = util.inspect(slice.call(arguments, 1), { depth: 1, colors: true }),\r\n        args = [time, title, label].concat(inspectedArgs),\r\n        level = self.getLevel(),\r\n        consoleFn = spec.f || console.log;\r\n\r\n\r\n    if (Logger.onWrite && _.isFunction(Logger.onWrite) && level >= Logger.LOG_LEVEL) {\r\n      let message = {\r\n        severity: severity,\r\n        time: time,\r\n        domain: self.name,\r\n        data: slice.call(arguments, 1)\r\n      };\r\n      Logger.onWrite(message);\r\n    }\r\n\r\n    if (level >= spec.severity && level >= Logger.LOG_LEVEL) {\r\n      consoleFn.apply(console, args);\r\n    }\r\n\r\n  };\r\n\r\n\r\n  this.writeFile = function (severity) {\r\n    var now = new Date(),\r\n        spec = self.levelMap[severity || 'log'],\r\n        obj = {\r\n          time: now,\r\n          severity: (spec.title).trim(),\r\n          source: self.name,\r\n          data: slice.call(arguments, 1)\r\n        },\r\n        str,\r\n        level = self.getLevel();\r\n\r\n    return new Promise(function (resolve, reject) {\r\n\r\n      if (level >= spec.severity) {\r\n        try {\r\n          str = JSON.stringify(obj);\r\n        } catch (err) {\r\n          str = ['\"', now, spec.title, self.name, 'invalid object', err, '\"'].join('\\t');\r\n        }\r\n        str += '\\n';\r\n        fs.appendFile(self.filepath, str, function (err) {\r\n          if (err) {\r\n            reject('unable to write to logfile', self.filepath, err);\r\n          } else {\r\n            resolve();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  if (options.destination === 'file') {\r\n    if (!options.filepath) {\r\n      throw new Error('logger error, must specify filepath if writing to disk');\r\n    }\r\n\r\n    this.filepath = options.filepath;\r\n\r\n    if (!fs) {\r\n      throw new Error('unable to initialize fs module, cannot write to file');\r\n    }\r\n\r\n    this.write = this.writeFile;\r\n  } else if (isBrowser) {\r\n    this.write = this.writeBrowser;\r\n  } else {\r\n    this.write = this.writeConsole;\r\n  }\r\n\r\n  this.getLevel = function () {\r\n    return (self.level != null) ? self.level : Logger.LOG_LEVEL;\r\n  };\r\n\r\n  this.setLevel = function (level) {\r\n    if (_.isString(level)) {\r\n      level = self.levelMap[level].severity;\r\n    } else {\r\n      level = parseInt(level, 10);\r\n    }\r\n    self.level = level;\r\n  };\r\n\r\n  this.quiet = function () {\r\n    this.setLevel(Logger.NONE);\r\n  };\r\n\r\n  this.loud = function () {\r\n    this.setLevel(Logger.ALL);\r\n  };\r\n\r\n  // actually creates functions (log.log, log.debug, etc)\r\n  Object.keys(this.levelMap).forEach(function (levelName) {\r\n    self[levelName] = self.write.bind(self, levelName);\r\n  });\r\n\r\n  this.cache = Logger.cache.bind(this);\r\n\r\n\r\n};\r\n\r\nLogger.NONE = 0;\r\nLogger.ERROR = 1;\r\nLogger.WARN = 2;\r\nLogger.INFO = 3;\r\nLogger.LOG = 4;\r\nLogger.DEBUG = 5;\r\nLogger.ALL = 10;\r\n\r\n\r\nfunction registerLogger (instance) {\r\n  let context = _private(Logger);\r\n  if (!context.loggers) {\r\n    context.loggers = new Set();\r\n  }\r\n  _private(Logger).loggers.add(instance);\r\n\r\n  if (typeof global !== 'undefined' && global.LOG_REGISTRY instanceof Set) {\r\n    global.LOG_REGISTRY.add(instance);\r\n  }\r\n}\r\n\r\n\r\nfunction getLoggerByName (name) {\r\n  let result = eachLogger( function (l) {\r\n    return (l.name === name) && l;\r\n  });\r\n  return result[0];\r\n}\r\n\r\nfunction eachLogger (fn) {\r\n  fn = fn || ((l) => l);\r\n  let context = _private(Logger);\r\n  let result = [];\r\n  if (context.loggers) {\r\n    for (let l of context.loggers) {\r\n      let val = fn(l);\r\n      if (val) { result.push(val); }\r\n    }\r\n  }\r\n\r\n  if (typeof global !== 'undefined' && global.LOG_REGISTRY instanceof Set) {\r\n    for (let l of global.LOG_REGISTRY) {\r\n      let val = fn(l);\r\n      if (val) { result.push(val); }\r\n    }\r\n  }\r\n\r\n  return result;\r\n\r\n}\r\n\r\n\r\nfunction getGlobalLogLevel () {\r\n  let context = (typeof global !== 'undefined') && global.LOG_LEVEL ? global :\r\n                (typeof window !== 'undefined') && window.LOG_LEVEL ? window :\r\n                { LOG_LEVEL: DEFAULT_LOG_LEVEL };\r\n\r\n  if (!isNaN(context.LOG_LEVEL)) {\r\n    return parseInt(context.LOG_LEVEL);\r\n  } else {\r\n    return DEFAULT_LOG_LEVEL;\r\n  }\r\n}\r\n\r\nObject.defineProperty(Logger, 'LOG_LEVEL', {\r\n  get: getGlobalLogLevel,\r\n  set: (val) => {\r\n    !isNaN(val) && (DEFAULT_LOG_LEVEL = parseInt(val, 10));\r\n    return DEFAULT_LOG_LEVEL;\r\n  }\r\n});\r\n\r\n\r\nvar levelMap = Logger.prototype.levelMap = {\r\n  'debug': {\r\n    severity: Logger.DEBUG,\r\n    title: 'DEBUG   ',\r\n    fn: console.log,\r\n    css: 'font-weight: bold; background-color: green; color: white',\r\n    ansi: 'green+black_bg'\r\n  },\r\n  'info': {\r\n    severity: Logger.INFO,\r\n    title: 'INFO    ',\r\n    fn: console.info,\r\n    css: 'font-weight: bold; background-color: #333; color: #ccc',\r\n    ansi: 'cyan+black_bg+bold'\r\n  },\r\n  'warn': {\r\n    severity: Logger.WARN,\r\n    title: 'WARN    ',\r\n    fn: console.warn,\r\n    css: 'font-weight: bold; background-color: orange; color: purple',\r\n    ansi: 'yellow+black_bg+bold'\r\n  },\r\n  'error': {\r\n    severity: Logger.ERROR,\r\n    title: 'ERR ',\r\n    fn: console.error,\r\n    css: 'font-weight: bold; background-color: red; color: white',\r\n    ansi: 'red+black_bg+bold'\r\n  },\r\n  'log': {\r\n    severity: Logger.LOG,\r\n    title: '        ',\r\n    fn: console.log,\r\n    css: 'font-weight: bold; background-color: white; color: black',\r\n    ansi: 'black+white_bg'\r\n  }\r\n};\r\n\r\n\r\nLogger.verbosity = function (logLevel, logName, force) {\r\n  var level = parseInt(logLevel, 10) || levelMap[logLevel];\r\n\r\n  if (isNaN(logLevel)) return Logger.LOG_LEVEL;\r\n\r\n  if (logName || force) {\r\n    eachLogger( (log) => {\r\n      if (!logName || (log.name === logName)) {\r\n        log.level = level;\r\n      }\r\n    });\r\n  } else {\r\n    Logger.LOG_LEVEL = level;\r\n  }\r\n};\r\n\r\nLogger.quietAll = function (logName) {\r\n  Logger.verbosity(Logger.NONE, logName, true);\r\n};\r\n\r\nLogger.loudAll = function (logName) {\r\n  Logger.verbosity(Logger.ALL, logName, true);\r\n};\r\n\r\nLogger.getLogLevels = function () {\r\n  return eachLogger();\r\n};\r\n\r\nLogger.cache = function (saveLabel, logLevel) {\r\n  var self = (this instanceof Logger) ? this : Logger;\r\n\r\n  saveLabel || (saveLabel = 'temp');\r\n  logLevel || (logLevel = 'log');\r\n  return function (result) {\r\n    var args = Array.prototype.slice.apply(arguments),\r\n        logFunction = ((self instanceof Logger) && self[logLevel]) ?\r\n                          self[logLevel].bind(self) :\r\n                          (typeof log !== 'undefined' && log.hasOwnProperty(logLevel)) ?\r\n                          log[logLevel].bind(log) :\r\n                          (logLevel in console) ?\r\n                          console[logLevel].bind(console) :\r\n                          undefined;\r\n\r\n    if (logFunction) {\r\n      logFunction.apply(undefined, ['cached as ' + saveLabel].concat(args));\r\n    } else {\r\n      console.log('cached as ' + saveLabel);\r\n    }\r\n\r\n    if (args.length === 1) {\r\n      self.cache[saveLabel] = args[0];\r\n    } else if (args.length === 2 && args[0] == undefined) {\r\n      self.cache[saveLabel] = args[1];\r\n    } else {\r\n      self.cache[saveLabel] = args;\r\n    }\r\n  };\r\n};\r\n\r\nLogger.readLogFile = function (filepath, callback) {\r\n  callback = callback || console.log.bind(console);\r\n\r\n  if (!fs) {\r\n    throw new Error('fs module not loaded');\r\n  }\r\n\r\n  fs.readFile(filepath, 'utf8', function (err, raw) {\r\n    if (err) {\r\n      return callback(err);\r\n    }\r\n\r\n    var str = '[' + str.split('\\n').join(',') + ']';\r\n\r\n    try {\r\n      callback(null, JSON.parse(str));\r\n    } catch (err) {\r\n      callback(err);\r\n    }\r\n\r\n  });\r\n\r\n};\r\n\r\nfunction randomHSLCSS () {\r\n  var hue = Math.floor(Math.random()*360),\r\n      sat = Math.floor(Math.random()*30) + 70,\r\n      lumOffset = Math.random() > 0.5 ? 75 : 10,\r\n      lum = Math.floor(Math.random()*20) + lumOffset,\r\n      bghue = (hue + 180) % 360,\r\n      bglum = (100 - lum),\r\n      bgsat = bglum > 50 ? sat * 0.5 : sat;\r\n\r\n  return `background-color: hsl(${bghue},${bgsat}%,${bglum}%); color: hsl(${hue},${sat}%,${lum}%)`;\r\n}\r\n\r\n\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  l       The lightness\r\n * @return  Array           The RGB representation\r\n */\r\nfunction hslToRgb(h, s, l){\r\n    var r, g, b;\r\n\r\n    if(s == 0){\r\n        r = g = b = l; // achromatic\r\n    }else{\r\n        var hue2rgb = function hue2rgb(p, q, t){\r\n            if(t < 0) t += 1;\r\n            if(t > 1) t -= 1;\r\n            if(t < 1/6) return p + (q - p) * 6 * t;\r\n            if(t < 1/2) return q;\r\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        var p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1/3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1/3);\r\n    }\r\n\r\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\r\n}\r\n\r\nmodule.exports = Logger;\r\n\r\n/*\r\n\r\nLogger = require('./Logger')\r\nlog = new Logger();\r\n\r\nlog = new Logger({\r\n  name: 'testwrite',\r\n  destination: 'file',\r\n  filepath: './test.log'\r\n});\r\n// can check if complete using promise\r\np = log.info('hello world')\r\n\r\n*/\r\n"]}